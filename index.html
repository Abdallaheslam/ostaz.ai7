<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#6B5BFF" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°" />
  
  <!-- Meta Tags for SEO -->
  <meta name="description" content="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† - ØªØ³ÙˆÙ‚ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ù…Ø¹ ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" />
  <meta name="keywords" content="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª, ØªØ³ÙˆÙ‚, Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†, ØªÙˆØµÙŠÙ„, Ø¨Ù†Ù‡Ø§, Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©" />
  <meta property="og:title" content="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°" />
  <meta property="og:description" content="Ø£ÙØ¶Ù„ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù…Ø¹ ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹" />
  <meta property="og:image" content="./icons/icon-512x512.png" />
  <meta property="og:type" content="website" />
  
  <!-- iOS Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª" />
  <link rel="apple-touch-icon" href="./icons/apple-touch-icon.png">
  
  <!-- Windows Meta Tags -->
  <meta name="msapplication-TileColor" content="#6B5BFF" />
  <meta name="msapplication-TileImage" content="./icons/icon-144x144.png" />
  
  <title>Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø° | Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./icons/icon-192x192.png" type="image/png">
  
  <!-- Fonts & Icons -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" as="style">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  
  <!-- Animate.css for animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- ====== CSS Ù…Ø¶Ù…Ù‘Ù† Ù…Ø¹ ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ ====== -->
  <style>
    /* ====== CSS RESET & BASE STYLES ====== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    :root {
      --primary-gradient: linear-gradient(135deg, #6B5BFF 0%, #7C64FF 100%);
      --primary-color: #6B5BFF;
      --primary-dark: #5A4BFF;
      --primary-light: #8C7CFF;
      --search-orange: #FFA500;
      --browse-orange: #FF7F00;
      --coupon-purple: #6B5BFF;
      --cart-red: #FF2D55;
      --phone-orange: #FF9500;
      --whatsapp-green: #25D366;
      --bg-color: #FFFFFF;
      --text-primary: #333333;
      --text-secondary: #666666;
      --text-light: #999999;
      --card-bg: #ffffff;
      --border-color: #e0e0e0;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.16);
      --border-radius-sm: 8px;
      --border-radius-md: 12px;
      --border-radius-lg: 16px;
      --transition-fast: 0.2s ease;
      --transition-normal: 0.3s ease;
      --transition-slow: 0.5s ease;
      --navbar-height: 60px;
      --bottom-nav-height: 70px;
    }
    
    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }
    
    body {
      font-family: 'Cairo', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-primary);
      line-height: 1.6;
      direction: rtl;
      overflow-x: hidden;
      padding-bottom: var(--bottom-nav-height);
      min-height: 100vh;
    }
    
    /* ====== ADMIN PANEL OVERLAY ====== */
    .admin-panel-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2000;
      display: none;
      backdrop-filter: blur(10px);
      animation: fadeIn 0.3s ease;
    }
    
    .admin-panel-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--bg-color);
      z-index: 2001;
      display: none;
      flex-direction: column;
      animation: slideInUp 0.4s ease;
      overflow: hidden;
    }
    
    .admin-panel-container.active {
      display: flex;
    }
    
    /* ====== ADMIN HEADER ====== */
    .admin-header {
      background: var(--primary-gradient);
      color: white;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: var(--shadow-md);
      position: relative;
      z-index: 10;
      min-height: 70px;
    }
    
    .admin-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.3rem;
      font-weight: 700;
    }
    
    .admin-title i {
      font-size: 1.5rem;
    }
    
    .admin-close-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-fast);
      font-size: 1.2rem;
    }
    
    .admin-close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(90deg);
    }
    
    /* ====== ADMIN CONTENT ====== */
    .admin-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #f8f9fa;
    }
    
    /* ====== ADMIN STATS ====== */
    .admin-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .admin-stat-card {
      background: white;
      border-radius: var(--border-radius-lg);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border-color);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }
    
    .admin-stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
      border-color: var(--primary-color);
    }
    
    .admin-stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }
    
    .admin-stat-icon {
      width: 50px;
      height: 50px;
      margin: 0 auto 15px;
      background: rgba(107, 91, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      color: var(--primary-color);
    }
    
    .admin-stat-value {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 5px;
    }
    
    .admin-stat-label {
      color: var(--text-light);
      font-size: 0.9rem;
    }
    
    /* ====== ADMIN TABS ====== */
    .admin-tabs-container {
      background: white;
      border-radius: var(--border-radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      margin-bottom: 25px;
    }
    
    .admin-tabs-header {
      display: flex;
      overflow-x: auto;
      background: rgba(107, 91, 255, 0.05);
      padding: 0 10px;
      border-bottom: 1px solid var(--border-color);
      -webkit-overflow-scrolling: touch;
    }
    
    .admin-tab {
      padding: 15px 20px;
      background: none;
      border: none;
      color: var(--text-secondary);
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      position: relative;
      white-space: nowrap;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .admin-tab.active {
      color: var(--primary-color);
    }
    
    .admin-tab.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-gradient);
      border-radius: 3px 3px 0 0;
    }
    
    .admin-tab:hover:not(.active) {
      color: var(--primary-dark);
      background: rgba(107, 91, 255, 0.05);
    }
    
    /* ====== ADMIN TAB CONTENT ====== */
    .admin-tab-content {
      padding: 20px;
      display: none;
    }
    
    .admin-tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    /* ====== ADMIN TABLES ====== */
    .admin-table-container {
      overflow-x: auto;
      border-radius: var(--border-radius-md);
      border: 1px solid var(--border-color);
      background: white;
      -webkit-overflow-scrolling: touch;
    }
    
    .admin-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }
    
    .admin-table th {
      background: rgba(107, 91, 255, 0.1);
      color: var(--text-primary);
      padding: 15px;
      text-align: right;
      font-weight: 600;
      border-bottom: 1px solid var(--border-color);
    }
    
    .admin-table td {
      padding: 12px 15px;
      border-bottom: 1px solid var(--border-color);
      color: var(--text-secondary);
    }
    
    .admin-table tr:last-child td {
      border-bottom: none;
    }
    
    .admin-table tr:hover {
      background: rgba(107, 91, 255, 0.03);
    }
    
    /* ====== ADMIN FORMS ====== */
    .admin-form-container {
      background: white;
      border-radius: var(--border-radius-lg);
      padding: 25px;
      box-shadow: var(--shadow-sm);
    }
    
    .admin-form-title {
      font-size: 1.3rem;
      color: var(--primary-color);
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(107, 91, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .admin-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.95rem;
    }
    
    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-md);
      font-family: 'Cairo', sans-serif;
      font-size: 1rem;
      transition: all var(--transition-fast);
      background: white;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(107, 91, 255, 0.1);
    }
    
    .form-actions {
      display: flex;
      gap: 10px;
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }
    
    /* ====== ADMIN QUICK ACTIONS ====== */
    .admin-quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .quick-action-btn {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-lg);
      padding: 20px 15px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-normal);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--text-primary);
    }
    
    .quick-action-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }
    
    .quick-action-icon {
      width: 50px;
      height: 50px;
      background: rgba(107, 91, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      color: var(--primary-color);
    }
    
    .quick-action-label {
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    /* ====== ADMIN PRODUCTS GRID ====== */
    .admin-products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .admin-product-card {
      background: white;
      border-radius: var(--border-radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border-color);
      transition: all var(--transition-normal);
    }
    
    .admin-product-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
      border-color: var(--primary-color);
    }
    
    .admin-product-image {
      width: 100%;
      height: 120px;
      object-fit: cover;
      background: rgba(107, 91, 255, 0.05);
    }
    
    .admin-product-info {
      padding: 15px;
    }
    
    .admin-product-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 8px;
      color: var(--text-primary);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      height: 2.8em;
    }
    
    .admin-product-price {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 8px;
    }
    
    .admin-product-stock {
      font-size: 0.85rem;
      color: var(--text-light);
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    /* ====== ADMIN ORDERS LIST ====== */
    .admin-orders-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .admin-order-item {
      background: white;
      border-radius: var(--border-radius-md);
      padding: 15px;
      border: 1px solid var(--border-color);
      transition: all var(--transition-fast);
    }
    
    .admin-order-item:hover {
      border-color: var(--primary-color);
      box-shadow: var(--shadow-sm);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .order-id {
      font-weight: 600;
      color: var(--primary-color);
    }
    
    .order-date {
      font-size: 0.85rem;
      color: var(--text-light);
    }
    
    .order-customer {
      margin-bottom: 10px;
      font-size: 0.95rem;
    }
    
    .order-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 10px;
      border-top: 1px solid var(--border-color);
    }
    
    .order-total {
      font-weight: 700;
      color: var(--primary-color);
    }
    
    .order-status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .status-pending {
      background: rgba(255, 149, 0, 0.1);
      color: #FF9500;
    }
    
    .status-confirmed {
      background: rgba(107, 91, 255, 0.1);
      color: var(--primary-color);
    }
    
    .status-delivered {
      background: rgba(37, 211, 102, 0.1);
      color: #25D366;
    }
    
    /* ====== ADMIN BUTTONS ====== */
    .admin-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 20px;
      border: none;
      border-radius: var(--border-radius-md);
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all var(--transition-normal);
      text-decoration: none;
    }
    
    .admin-btn-primary {
      background: var(--primary-gradient);
      color: white;
    }
    
    .admin-btn-primary:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .admin-btn-secondary {
      background: rgba(107, 91, 255, 0.1);
      color: var(--primary-color);
    }
    
    .admin-btn-secondary:hover {
      background: rgba(107, 91, 255, 0.2);
    }
    
    .admin-btn-danger {
      background: rgba(255, 45, 85, 0.1);
      color: #FF2D55;
    }
    
    .admin-btn-danger:hover {
      background: rgba(255, 45, 85, 0.2);
    }
    
    .admin-btn-sm {
      padding: 8px 15px;
      font-size: 0.85rem;
    }
    
    .admin-btn-block {
      width: 100%;
    }
    
    /* ====== FLOATING BUTTONS ====== */
    .admin-float-btn {
      position: fixed;
      bottom: 90px;
      left: 20px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--primary-gradient);
      color: white;
      border: none;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      z-index: 998;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      transition: all var(--transition-normal);
      animation: pulse 2s infinite;
    }
    
    .admin-float-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-xl);
    }
    
    .whatsapp-float-btn {
      position: fixed;
      bottom: 160px;
      left: 20px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, #25D366, #4CD964);
      color: white;
      border: none;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      z-index: 998;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      transition: all var(--transition-normal);
    }
    
    .whatsapp-float-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-xl);
    }
    
    .phone-float-btn {
      position: fixed;
      bottom: 230px;
      left: 20px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FF9500, #FFAA33);
      color: white;
      border: none;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      z-index: 998;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      transition: all var(--transition-normal);
    }
    
    .phone-float-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-xl);
    }
    
    /* ====== MAIN APP STYLES ====== */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--navbar-height);
      background: var(--primary-gradient);
      color: white;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(107, 91, 255, 0.15);
      display: flex;
      align-items: center;
      padding: 0 15px;
    }
    
    .navbar-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      gap: 10px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    
    .logo-icon {
      width: 36px;
      height: 36px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    
    .logo-text {
      font-size: 1.1rem;
      font-weight: 800;
      color: white;
      white-space: nowrap;
    }
    
    .auth-buttons {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 8px 15px;
      border: none;
      border-radius: var(--border-radius-md);
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all var(--transition-fast);
      text-decoration: none;
    }
    
    .btn-primary {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    
    .btn-orange {
      background: linear-gradient(135deg, #FF9500, #FFA500);
      color: white;
    }
    
    .main-content {
      padding: calc(var(--navbar-height) + 20px) 20px 100px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }
    
    .hero-section {
      background: var(--primary-gradient), 
                  url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      border-radius: var(--border-radius-lg);
      padding: 30px;
      color: white;
      margin-bottom: 25px;
      position: relative;
      overflow: hidden;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
      text-align: center;
    }
    
    .hero-title {
      font-size: 1.8rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .hero-subtitle {
      font-size: 1rem;
      margin-bottom: 20px;
      opacity: 0.9;
    }
    
    .hero-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .section {
      background: var(--card-bg);
      border-radius: var(--border-radius-lg);
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(107, 91, 255, 0.1);
    }
    
    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--primary-color);
      font-size: 1.2rem;
    }
    
    .view-all {
      color: var(--primary-color);
      font-weight: 600;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 5px;
      text-decoration: none;
    }
    
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 15px;
    }
    
    .category-card {
      background: var(--card-bg);
      border-radius: var(--border-radius-md);
      padding: 15px;
      text-align: center;
      text-decoration: none;
      color: var(--text-primary);
      transition: all var(--transition-normal);
      border: 1px solid var(--border-color);
    }
    
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
      border-color: var(--primary-color);
    }
    
    .category-icon {
      width: 50px;
      height: 50px;
      margin: 0 auto 10px;
      background: rgba(107, 91, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: var(--primary-color);
    }
    
    .category-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 5px;
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
    }
    
    .product-card {
      background: var(--card-bg);
      border-radius: var(--border-radius-md);
      overflow: hidden;
      position: relative;
      transition: all var(--transition-normal);
      border: 1px solid var(--border-color);
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .product-image {
      width: 100%;
      height: 150px;
      object-fit: contain;
      background: rgba(107, 91, 255, 0.05);
      padding: 15px;
    }
    
    .product-info {
      padding: 15px;
    }
    
    .product-name {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 8px;
      height: 2.8em;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    
    .product-price {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 10px;
    }
    
    .add-to-cart-btn {
      width: 100%;
      padding: 10px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: var(--border-radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-normal);
    }
    
    .add-to-cart-btn:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-nav-height);
      background: white;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 999;
      padding-bottom: env(safe-area-inset-bottom);
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px;
      color: var(--text-light);
      text-decoration: none;
      transition: all var(--transition-fast);
      flex: 1;
      max-width: 80px;
    }
    
    .nav-item.active {
      color: var(--primary-color);
    }
    
    .nav-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(107, 91, 255, 0.1);
      border-radius: 50%;
      font-size: 1.1rem;
      transition: all var(--transition-normal);
    }
    
    .nav-item.active .nav-icon {
      background: var(--primary-gradient);
      color: white;
    }
    
    .nav-label {
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .nav-badge {
      position: absolute;
      top: -2px;
      left: 50%;
      background: var(--cart-red);
      color: white;
      font-size: 0.7rem;
      min-width: 18px;
      height: 18px;
      border-radius: 9px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 4px;
      font-weight: 700;
    }
    
    /* ====== ANIMATIONS ====== */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(107, 91, 255, 0.7);
      }
      70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(107, 91, 255, 0);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(107, 91, 255, 0);
      }
    }
    
    /* ====== RESPONSIVE DESIGN ====== */
    @media (max-width: 768px) {
      :root {
        --navbar-height: 60px;
        --bottom-nav-height: 65px;
      }
      
      .hero-title {
        font-size: 1.5rem;
      }
      
      .hero-subtitle {
        font-size: 0.9rem;
      }
      
      .admin-stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .admin-quick-actions {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .admin-products-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .categories-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .products-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .hero-actions {
        flex-direction: column;
      }
      
      .hero-actions .btn {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .admin-stats-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-quick-actions {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .admin-products-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-tab {
        padding: 12px 15px;
        font-size: 0.9rem;
      }
      
      .categories-grid {
        grid-template-columns: 1fr;
      }
      
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .admin-float-btn,
      .whatsapp-float-btn,
      .phone-float-btn {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
        bottom: 80px;
      }
      
      .whatsapp-float-btn {
        bottom: 145px;
      }
      
      .phone-float-btn {
        bottom: 210px;
      }
    }
    
    @media (max-width: 360px) {
      .admin-quick-actions {
        grid-template-columns: 1fr;
      }
      
      .admin-tab {
        padding: 10px 12px;
        font-size: 0.85rem;
      }
    }
    
    /* ====== UTILITY CLASSES ====== */
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    .text-left { text-align: left; }
    .text-primary { color: var(--primary-color); }
    .text-success { color: var(--whatsapp-green); }
    .text-danger { color: var(--cart-red); }
    .text-warning { color: var(--phone-orange); }
    .text-muted { color: var(--text-light); }
    
    .mb-1 { margin-bottom: 8px; }
    .mb-2 { margin-bottom: 16px; }
    .mb-3 { margin-bottom: 24px; }
    .mb-4 { margin-bottom: 32px; }
    
    .mt-1 { margin-top: 8px; }
    .mt-2 { margin-top: 16px; }
    .mt-3 { margin-top: 24px; }
    .mt-4 { margin-top: 32px; }
    
    .d-flex { display: flex; }
    .d-block { display: block; }
    .d-none { display: none; }
    
    .align-items-center { align-items: center; }
    .justify-content-between { justify-content: space-between; }
    .justify-content-center { justify-content: center; }
    
    .w-100 { width: 100%; }
    .h-100 { height: 100%; }
    
    .position-relative { position: relative; }
    .position-absolute { position: absolute; }
    .position-fixed { position: fixed; }
    
    .overflow-hidden { overflow: hidden; }
    .overflow-auto { overflow: auto; }
    
    /* ====== SCROLLBAR STYLING ====== */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(107, 91, 255, 0.1);
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--primary-gradient);
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
    }
    
    /* ====== PWA SPECIFIC STYLES ====== */
    @media (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: calc(var(--bottom-nav-height) + env(safe-area-inset-bottom));
      }
      
      .navbar {
        padding-top: env(safe-area-inset-top);
        height: calc(var(--navbar-height) + env(safe-area-inset-top));
      }
      
      .main-content {
        padding-top: calc(var(--navbar-height) + env(safe-area-inset-top) + 20px);
      }
    }
  </style>
  
</head>
<body>

  <!-- Main App Content -->
  <nav class="navbar">
    <div class="navbar-container">
      <!-- Logo -->
      <div class="logo" onclick="goHome()">
        <div class="logo-icon">
          <i class="fas fa-store"></i>
        </div>
        <div class="logo-text">Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°</div>
      </div>
      
      <!-- Auth Buttons -->
      <div class="auth-buttons" id="authButtons">
        <button class="btn btn-primary" onclick="openLoginModal()">
          <i class="fas fa-sign-in-alt"></i>
          <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
        </button>
      </div>
      
      <!-- User Profile -->
      <div class="user-profile" id="userProfile" style="display: none;">
        <img src="https://ui-avatars.com/api/?name=Ù…Ø³ØªØ®Ø¯Ù…&background=6B5BFF&color=fff&size=64" 
             alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" 
             class="user-avatar">
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content" id="mainContent">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <h1 class="hero-title">ğŸ‰ Ø¹Ø±ÙˆØ¶ 2026 Ø§Ù„Ø­ØµØ±ÙŠØ© ğŸ‰</h1>
        <p class="hero-subtitle">Ø®ØµÙˆÙ…Ø§Øª ØªØµÙ„ Ø¥Ù„Ù‰ 50% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
        <div class="hero-actions">
          <button class="btn btn-orange" onclick="showOffersPage()">
            <i class="fas fa-percentage"></i>
            ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶
          </button>
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-tags"></i>
          ØªØµÙØ­ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
        </h2>
        <a href="#" class="view-all" onclick="showCategoriesPage()">
          Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
          <i class="fas fa-arrow-left"></i>
        </a>
      </div>
      <div class="categories-grid" id="categoriesContainer">
        <!-- Categories will be loaded here -->
      </div>
    </section>

    <!-- Featured Products -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-star"></i>
          Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø©
        </h2>
        <a href="#" class="view-all" onclick="showAllProductsPage()">
          Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
          <i class="fas fa-arrow-left"></i>
        </a>
      </div>
      <div class="products-grid" id="featuredContainer">
        <!-- Featured products will be loaded here -->
      </div>
    </section>
  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="#" class="nav-item active" onclick="goHome(); setActiveNav(this);">
      <div class="nav-icon">
        <i class="fas fa-home"></i>
      </div>
      <span class="nav-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
    </a>
    
    <a href="#" class="nav-item" onclick="showAllProductsPage(); setActiveNav(this);">
      <div class="nav-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <span class="nav-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
    </a>
    
    <a href="#" class="nav-item" onclick="openCart(); setActiveNav(this);">
      <div class="nav-icon">
        <i class="fas fa-shopping-cart"></i>
      </div>
      <span class="nav-label">Ø§Ù„Ø¹Ø±Ø¨Ø©</span>
      <span class="nav-badge" id="cartBadge">0</span>
    </a>
    
    <a href="#" class="nav-item" onclick="openWishlist(); setActiveNav(this);">
      <div class="nav-icon">
        <i class="fas fa-heart"></i>
      </div>
      <span class="nav-label">Ø§Ù„Ù…ÙØ¶Ù„Ø©</span>
    </a>
  </nav>

  <!-- Floating Buttons -->
  <button class="admin-float-btn" onclick="openAdminPanel()" title="Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…">
    <i class="fas fa-tools"></i>
  </button>
  
  <button class="whatsapp-float-btn" onclick="openWhatsapp()" title="ÙˆØ§ØªØ³Ø§Ø¨">
    <i class="fab fa-whatsapp"></i>
  </button>
  
  <button class="phone-float-btn" onclick="openPhone()" title="Ø§ØªØµÙ„ Ø¨Ù†Ø§">
    <i class="fas fa-phone"></i>
  </button>

  <!-- Admin Panel -->
  <div class="admin-panel-overlay" id="adminOverlay"></div>
  
  <div class="admin-panel-container" id="adminPanel">
    <!-- Admin Header -->
    <header class="admin-header">
      <div class="admin-title">
        <i class="fas fa-tools"></i>
        <span>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</span>
      </div>
      <button class="admin-close-btn" onclick="closeAdminPanel()">
        <i class="fas fa-times"></i>
      </button>
    </header>
    
    <!-- Admin Content -->
    <div class="admin-content">
      <!-- Stats Section -->
      <div class="admin-stats-grid" id="adminStats">
        <!-- Stats will be loaded here -->
      </div>
      
      <!-- Quick Actions -->
      <div class="admin-quick-actions mb-3">
        <button class="quick-action-btn" onclick="openAdminTab('products')">
          <div class="quick-action-icon">
            <i class="fas fa-box"></i>
          </div>
          <span class="quick-action-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
        </button>
        
        <button class="quick-action-btn" onclick="openAdminTab('orders')">
          <div class="quick-action-icon">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <span class="quick-action-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
        </button>
        
        <button class="quick-action-btn" onclick="openAdminTab('categories')">
          <div class="quick-action-icon">
            <i class="fas fa-tags"></i>
          </div>
          <span class="quick-action-label">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</span>
        </button>
        
        <button class="quick-action-btn" onclick="openAdminTab('customers')">
          <div class="quick-action-icon">
            <i class="fas fa-users"></i>
          </div>
          <span class="quick-action-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
        </button>
      </div>
      
      <!-- Tabs Content -->
      <div class="admin-tabs-container">
        <div class="admin-tabs-header">
          <button class="admin-tab active" onclick="openAdminTab('products')">
            <i class="fas fa-box"></i>
            Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
          </button>
          <button class="admin-tab" onclick="openAdminTab('orders')">
            <i class="fas fa-shopping-cart"></i>
            Ø§Ù„Ø·Ù„Ø¨Ø§Øª
          </button>
          <button class="admin-tab" onclick="openAdminTab('categories')">
            <i class="fas fa-tags"></i>
            Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
          </button>
          <button class="admin-tab" onclick="openAdminTab('settings')">
            <i class="fas fa-cog"></i>
            Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
          </button>
        </div>
        
        <!-- Products Tab -->
        <div class="admin-tab-content active" id="productsTab">
          <div class="admin-form-container">
            <h3 class="admin-form-title">
              <i class="fas fa-plus"></i>
              Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
            </h3>
            
            <form class="admin-form" id="addProductForm">
              <div class="form-group">
                <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                <input type="text" class="form-control" id="productName" required>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø³Ø¹Ø± (Ø¬.Ù…)</label>
                <input type="number" class="form-control" id="productPrice" step="0.01" required>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø®ØµÙ… (%)</label>
                <input type="number" class="form-control" id="productDiscount" min="0" max="100" value="0">
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</label>
                <input type="number" class="form-control" id="productStock" required>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                <select class="form-control" id="productCategory">
                  <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>
                </select>
              </div>
              
              <div class="form-group">
                <label class="form-label">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ (Ø±Ø§Ø¨Ø·)</label>
                <input type="url" class="form-control" id="productImage">
              </div>
              
              <div class="form-actions">
                <button type="button" class="admin-btn admin-btn-secondary" onclick="clearProductForm()">
                  Ù…Ø³Ø­
                </button>
                <button type="submit" class="admin-btn admin-btn-primary">
                  Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬
                </button>
              </div>
            </form>
          </div>
          
          <div class="mt-3">
            <h3 class="admin-form-title">
              <i class="fas fa-boxes"></i>
              Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            </h3>
            
            <div class="admin-products-grid" id="adminProductsGrid">
              <!-- Products will be loaded here -->
            </div>
          </div>
        </div>
        
        <!-- Orders Tab -->
        <div class="admin-tab-content" id="ordersTab">
          <div class="admin-form-container">
            <h3 class="admin-form-title">
              <i class="fas fa-shopping-cart"></i>
              Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            </h3>
            
            <div class="admin-orders-list" id="adminOrdersList">
              <!-- Orders will be loaded here -->
            </div>
          </div>
        </div>
        
        <!-- Categories Tab -->
        <div class="admin-tab-content" id="categoriesTab">
          <div class="admin-form-container">
            <h3 class="admin-form-title">
              <i class="fas fa-plus"></i>
              Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ Ø¬Ø¯ÙŠØ¯
            </h3>
            
            <form class="admin-form" id="addCategoryForm">
              <div class="form-group">
                <label class="form-label">Ø§Ø³Ù… Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                <input type="text" class="form-control" id="categoryName" required>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</label>
                <select class="form-control" id="categoryIcon">
                  <option value="fas fa-tag">Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¹Ø§Ù…Ø©</option>
                  <option value="fas fa-wine-bottle">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</option>
                  <option value="fas fa-cheese">Ø£Ù„Ø¨Ø§Ù† ÙˆØ£Ø¬Ø¨Ø§Ù†</option>
                  <option value="fas fa-archive">Ù…Ø¹Ù„Ø¨Ø§Øª</option>
                  <option value="fas fa-cookie-bite">Ø­Ù„ÙˆÙŠØ§Øª</option>
                </select>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ù„ÙˆÙ†</label>
                <input type="color" class="form-control" id="categoryColor" value="#6B5BFF">
              </div>
              
              <div class="form-actions">
                <button type="button" class="admin-btn admin-btn-secondary" onclick="clearCategoryForm()">
                  Ù…Ø³Ø­
                </button>
                <button type="submit" class="admin-btn admin-btn-primary">
                  Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ
                </button>
              </div>
            </form>
          </div>
          
          <div class="mt-3">
            <h3 class="admin-form-title">
              <i class="fas fa-tags"></i>
              Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
            </h3>
            
            <div class="categories-grid" id="adminCategoriesGrid">
              <!-- Categories will be loaded here -->
            </div>
          </div>
        </div>
        
        <!-- Settings Tab -->
        <div class="admin-tab-content" id="settingsTab">
          <div class="admin-form-container">
            <h3 class="admin-form-title">
              <i class="fas fa-cog"></i>
              Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
            </h3>
            
            <form class="admin-form" id="storeSettingsForm">
              <div class="form-group">
                <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</label>
                <input type="text" class="form-control" id="storeName" value="Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°">
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                <input type="tel" class="form-control" id="storePhone" value="01550462808">
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø³Ø¹Ø± Ø§Ù„Ø´Ø­Ù† (Ø¬.Ù…)</label>
                <input type="number" class="form-control" id="shippingPrice" value="20">
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø´Ø­Ù† Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ (Ø¬.Ù…)</label>
                <input type="number" class="form-control" id="freeShippingMin" value="300">
              </div>
              
              <div class="form-actions">
                <button type="submit" class="admin-btn admin-btn-primary admin-btn-block">
                  Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>

  <!-- JavaScript Application Code -->
  <script>
  /**************************************************************************
   * ØªØ·Ø¨ÙŠÙ‚ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø¹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±
   * Ø¥ØµØ¯Ø§Ø± 2026.5 - Ù…ØµÙ…Ù… Ø®ØµÙŠØµØ§Ù‹ Ù„Ù„Ù‡ÙˆØ§ØªÙ
   **************************************************************************/

  // ---------- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ----------
  const APP_CONFIG = {
    name: 'Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°',
    version: '2026.5',
    firebase: {
      apiKey: "AIzaSyAX2wKpYXUYmEA-Yn-W88BoMbzbD24HlEE",
      authDomain: "supermarket-3aboda.firebaseapp.com",
      projectId: "supermarket-3aboda",
      storageBucket: "supermarket-3aboda.firebasestorage.app",
      messagingSenderId: "451841595000",
      appId: "1:451841595000:web:69ed544e1692ff09947f8d"
    },
    whatsapp: "201550462808",
    phone: "01550462808"
  };

  // ---------- ØªÙ‡ÙŠØ¦Ø© Firebase ----------
  try {
    firebase.initializeApp(APP_CONFIG.firebase);
  } catch (error) {
    console.error('Firebase initialization error:', error);
  }

  const db = firebase.firestore();
  const auth = firebase.auth();
  const storage = firebase.storage();

  // ---------- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ----------
  let currentUser = null;
  let userData = null;
  let cart = [];
  let globalProducts = [];
  let globalCategories = [];

  // ---------- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ----------
  document.addEventListener('DOMContentLoaded', async () => {
    console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ ØªØ·Ø¨ÙŠÙ‚ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø°');
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    setupAuth();
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    await loadInitialData();
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    setupEventListeners();
    
    console.log('âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…');
  });

  // ---------- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ----------
  function setupAuth() {
    auth.onAuthStateChanged(async (user) => {
      currentUser = user;
      
      if (user) {
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const userDoc = await db.collection('users').doc(user.uid).get();
        userData = userDoc.exists ? userDoc.data() : null;
        
        if (!userData) {
          // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
          userData = {
            name: user.displayName || user.email?.split('@')[0] || 'Ù…Ø³ØªØ®Ø¯Ù…',
            email: user.email,
            phone: '',
            address: '',
            role: 'customer',
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            photoURL: user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || user.email)}&background=6B5BFF&color=fff&size=64`
          };
          
          await db.collection('users').doc(user.uid).set(userData);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.getElementById('authButtons').style.display = 'none';
        document.getElementById('userProfile').style.display = 'flex';
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø¯ÙŠØ±ØŒ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…
        if (userData.role === 'admin') {
          document.querySelector('.admin-float-btn').style.display = 'flex';
        }
        
      } else {
        userData = null;
        document.getElementById('authButtons').style.display = 'flex';
        document.getElementById('userProfile').style.display = 'none';
        document.querySelector('.admin-float-btn').style.display = 'none';
      }
    });
  }

  // ---------- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ----------
  async function loadInitialData() {
    try {
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
      await loadCategories();
      
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©
      await loadFeaturedProducts();
      
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¨Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
      cart = JSON.parse(localStorage.getItem('cart') || '[]');
      updateCartBadge();
      
    } catch (error) {
      console.error('Error loading initial data:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
    }
  }

  async function loadCategories() {
    try {
      const container = document.getElementById('categoriesContainer');
      const categorySelect = document.getElementById('productCategory');
      
      const snapshot = await db.collection('categories')
        .orderBy('order', 'asc')
        .limit(8)
        .get();
      
      if (snapshot.empty) {
        // Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙØ§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        const defaultCategories = [
          { name: 'Ù…Ø¹Ù„Ø¨Ø§Øª', icon: 'fas fa-archive', color: '#6B5BFF', order: 1 },
          { name: 'Ø£Ù„Ø¨Ø§Ù†', icon: 'fas fa-cheese', color: '#FFA500', order: 2 },
          { name: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', icon: 'fas fa-wine-bottle', color: '#25D366', order: 3 },
          { name: 'Ø­Ù„ÙˆÙŠØ§Øª', icon: 'fas fa-cookie-bite', color: '#FF2D55', order: 4 }
        ];
        
        container.innerHTML = defaultCategories.map(cat => `
          <div class="category-card" onclick="filterByCategory('${cat.name}')">
            <div class="category-icon" style="color: ${cat.color}">
              <i class="${cat.icon}"></i>
            </div>
            <div class="category-name">${cat.name}</div>
          </div>
        `).join('');
        
        categorySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>' +
          defaultCategories.map(cat => `<option value="${cat.name}">${cat.name}</option>`).join('');
        
        // Ø­ÙØ¸ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        defaultCategories.forEach(async cat => {
          await db.collection('categories').add(cat);
        });
        
      } else {
        globalCategories = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        
        container.innerHTML = globalCategories.map(cat => `
          <div class="category-card" onclick="filterByCategory('${cat.name}')">
            <div class="category-icon" style="color: ${cat.color || '#6B5BFF'}">
              <i class="${cat.icon || 'fas fa-tag'}"></i>
            </div>
            <div class="category-name">${cat.name}</div>
          </div>
        `).join('');
        
        categorySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>' +
          globalCategories.map(cat => `<option value="${cat.name}">${cat.name}</option>`).join('');
      }
      
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
      loadAdminCategories();
      
    } catch (error) {
      console.error('Error loading categories:', error);
    }
  }

  async function loadFeaturedProducts() {
    try {
      const snapshot = await db.collection('products')
        .where('featured', '==', true)
        .limit(8)
        .get();
      
      renderProducts('featuredContainer', snapshot.docs);
      
      // Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
      const allSnapshot = await db.collection('products').limit(50).get();
      globalProducts = allSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      
    } catch (error) {
      console.error('Error loading featured products:', error);
    }
  }

  function renderProducts(containerId, products) {
    const container = document.getElementById(containerId);
    
    if (products.length === 0) {
      container.innerHTML = `
        <div class="text-center text-muted" style="grid-column: 1/-1; padding: 40px;">
          <i class="fas fa-box-open fa-3x mb-3"></i>
          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>
        </div>
      `;
      return;
    }
    
    container.innerHTML = products.map(doc => {
      const product = doc.data();
      const isInCart = cart.some(item => item.id === doc.id);
      
      return `
        <div class="product-card" data-id="${doc.id}">
          <img src="${product.imageUrl || product.image || 'https://via.placeholder.com/300x200/6B5BFF/ffffff?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…Ù†ØªØ¬'}" 
               alt="${product.name}"
               class="product-image"
               onerror="this.src='https://via.placeholder.com/300x200/6B5BFF/ffffff?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…Ù†ØªØ¬'">
          
          <div class="product-info">
            <h3 class="product-name">${product.name}</h3>
            <div class="product-price">
              ${(product.price * (1 - (product.discount || 0) / 100)).toFixed(2)} Ø¬.Ù…
              ${product.discount > 0 ? `
                <small style="color: var(--text-light); text-decoration: line-through; margin-right: 5px;">
                  ${product.price.toFixed(2)} Ø¬.Ù…
                </small>
              ` : ''}
            </div>
            
            <button class="add-to-cart-btn ${isInCart ? 'btn-success' : ''}" 
                    onclick="addToCart('${doc.id}', this)"
                    ${product.stock === 0 ? 'disabled' : ''}>
              <i class="${isInCart ? 'fas fa-check' : 'fas fa-cart-plus'}"></i>
              ${isInCart ? 'ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨Ø©' : 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©'}
            </button>
          </div>
        </div>
      `;
    }).join('');
  }

  // ---------- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨Ø© ----------
  function addToCart(productId, button = null) {
    if (!currentUser) {
      showNotification('Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©', 'warning');
      openLoginModal();
      return;
    }
    
    const product = globalProducts.find(p => p.id === productId);
    if (!product) {
      showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
      return;
    }
    
    if (product.stock === 0) {
      showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ±', 'warning');
      return;
    }
    
    const existingItem = cart.find(item => item.id === productId);
    
    if (existingItem) {
      if (product.stock && existingItem.quantity >= product.stock) {
        showNotification(`Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø£ÙƒØ«Ø± Ù…Ù† ${product.stock} Ù‚Ø·Ø¹Ø©`, 'warning');
        return;
      }
      existingItem.quantity++;
    } else {
      cart.push({
        id: productId,
        name: product.name,
        price: product.price,
        discount: product.discount || 0,
        image: product.imageUrl || product.image,
        quantity: 1,
        stock: product.stock
      });
    }
    
    if (button) {
      button.classList.add('btn-success');
      button.innerHTML = '<i class="fas fa-check"></i> ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨Ø©';
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartBadge();
    showNotification(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© "${product.name}" Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©`, 'success');
  }

  function updateCartBadge() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cartBadge').textContent = totalItems;
  }

  // ---------- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ± ----------
  function openAdminPanel() {
    if (!currentUser || userData?.role !== 'admin') {
      showNotification('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', 'error');
      openLoginModal();
      return;
    }
    
    document.getElementById('adminPanel').classList.add('active');
    document.getElementById('adminOverlay').style.display = 'block';
    document.body.style.overflow = 'hidden';
    
    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    loadAdminStats();
    loadAdminProducts();
    loadAdminOrders();
  }

  function closeAdminPanel() {
    document.getElementById('adminPanel').classList.remove('active');
    document.getElementById('adminOverlay').style.display = 'none';
    document.body.style.overflow = 'auto';
  }

  function openAdminTab(tabName) {
    // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
    document.querySelectorAll('.admin-tab-content').forEach(tab => {
      tab.classList.remove('active');
    });
    
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    document.querySelectorAll('.admin-tab').forEach(tab => {
      tab.classList.remove('active');
    });
    
    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
    document.getElementById(tabName + 'Tab').classList.add('active');
    
    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
    document.querySelectorAll('.admin-tab').forEach(tab => {
      if (tab.textContent.includes(getTabName(tabName))) {
        tab.classList.add('active');
      }
    });
    
    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
    switch(tabName) {
      case 'products':
        loadAdminProducts();
        break;
      case 'orders':
        loadAdminOrders();
        break;
      case 'categories':
        loadAdminCategories();
        break;
    }
  }

  function getTabName(tabKey) {
    const tabs = {
      'products': 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
      'orders': 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
      'categories': 'Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª',
      'settings': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'
    };
    return tabs[tabKey] || tabKey;
  }

  async function loadAdminStats() {
    try {
      const [ordersSnapshot, productsSnapshot, usersSnapshot] = await Promise.all([
        db.collection('orders').get(),
        db.collection('products').get(),
        db.collection('users').get()
      ]);
      
      const totalRevenue = ordersSnapshot.docs.reduce((sum, doc) => {
        const order = doc.data();
        return sum + (order.total || 0);
      }, 0);
      
      const statsHTML = `
        <div class="admin-stat-card">
          <div class="admin-stat-icon">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <div class="admin-stat-value">${totalRevenue.toFixed(2)}</div>
          <div class="admin-stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
        </div>
        
        <div class="admin-stat-card">
          <div class="admin-stat-icon">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <div class="admin-stat-value">${ordersSnapshot.size}</div>
          <div class="admin-stat-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
        </div>
        
        <div class="admin-stat-card">
          <div class="admin-stat-icon">
            <i class="fas fa-box"></i>
          </div>
          <div class="admin-stat-value">${productsSnapshot.size}</div>
          <div class="admin-stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
        </div>
        
        <div class="admin-stat-card">
          <div class="admin-stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="admin-stat-value">${usersSnapshot.size}</div>
          <div class="admin-stat-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
        </div>
      `;
      
      document.getElementById('adminStats').innerHTML = statsHTML;
      
    } catch (error) {
      console.error('Error loading admin stats:', error);
    }
  }

  async function loadAdminProducts() {
    try {
      const snapshot = await db.collection('products')
        .orderBy('createdAt', 'desc')
        .limit(20)
        .get();
      
      const container = document.getElementById('adminProductsGrid');
      
      if (snapshot.empty) {
        container.innerHTML = `
          <div class="text-center text-muted" style="grid-column: 1/-1; padding: 40px;">
            <i class="fas fa-box-open fa-3x mb-3"></i>
            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>
          </div>
        `;
        return;
      }
      
      let productsHTML = '';
      
      snapshot.docs.forEach(doc => {
        const product = doc.data();
        
        productsHTML += `
          <div class="admin-product-card">
            <img src="${product.imageUrl || product.image || 'https://via.placeholder.com/300x200/6B5BFF/ffffff?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…Ù†ØªØ¬'}" 
                 class="admin-product-image"
                 onerror="this.src='https://via.placeholder.com/300x200/6B5BFF/ffffff?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…Ù†ØªØ¬'">
            
            <div class="admin-product-info">
              <div class="admin-product-name">${product.name}</div>
              <div class="admin-product-price">${(product.price * (1 - (product.discount || 0) / 100)).toFixed(2)} Ø¬.Ù…</div>
              <div class="admin-product-stock">
                <i class="fas fa-box"></i>
                ${product.stock || 0} Ù‚Ø·Ø¹Ø©
              </div>
              
              <div style="display: flex; gap: 8px; margin-top: 10px;">
                <button class="admin-btn admin-btn-sm admin-btn-primary" onclick="editAdminProduct('${doc.id}')">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="admin-btn admin-btn-sm admin-btn-danger" onclick="deleteAdminProduct('${doc.id}')">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = productsHTML;
      
    } catch (error) {
      console.error('Error loading admin products:', error);
    }
  }

  async function loadAdminOrders() {
    try {
      const snapshot = await db.collection('orders')
        .orderBy('createdAt', 'desc')
        .limit(10)
        .get();
      
      const container = document.getElementById('adminOrdersList');
      
      if (snapshot.empty) {
        container.innerHTML = `
          <div class="text-center text-muted" style="padding: 40px;">
            <i class="fas fa-shopping-bag fa-3x mb-3"></i>
            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</p>
          </div>
        `;
        return;
      }
      
      let ordersHTML = '';
      
      snapshot.docs.forEach(doc => {
        const order = doc.data();
        const status = order.status || {};
        
        let statusText = 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±';
        let statusClass = 'status-pending';
        
        if (status.delivered) {
          statusText = 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„';
          statusClass = 'status-delivered';
        } else if (status.on_way) {
          statusText = 'ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚';
          statusClass = 'status-confirmed';
        } else if (status.preparing) {
          statusText = 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ¬Ù‡ÙŠØ²';
          statusClass = 'status-confirmed';
        } else if (status.confirmed) {
          statusText = 'ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯';
          statusClass = 'status-confirmed';
        }
        
        const orderDate = order.createdAt?.toDate?.() || new Date();
        const formattedDate = orderDate.toLocaleDateString('ar-EG');
        
        ordersHTML += `
          <div class="admin-order-item">
            <div class="order-header">
              <span class="order-id">#${doc.id.substring(0, 8)}</span>
              <span class="order-date">${formattedDate}</span>
            </div>
            
            <div class="order-customer">
              ${order.userName || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'} - ${order.userPhone || 'Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…'}
            </div>
            
            <div class="order-footer">
              <span class="order-total">${order.total?.toFixed(2) || '0'} Ø¬.Ù…</span>
              <span class="order-status ${statusClass}">${statusText}</span>
            </div>
            
            <div style="display: flex; gap: 8px; margin-top: 10px;">
              <button class="admin-btn admin-btn-sm admin-btn-secondary" onclick="viewAdminOrder('${doc.id}')">
                <i class="fas fa-eye"></i> Ø¹Ø±Ø¶
              </button>
              <button class="admin-btn admin-btn-sm admin-btn-primary" onclick="updateOrderStatus('${doc.id}', 'confirmed')">
                <i class="fas fa-check"></i> ØªØ£ÙƒÙŠØ¯
              </button>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = ordersHTML;
      
    } catch (error) {
      console.error('Error loading admin orders:', error);
    }
  }

  async function loadAdminCategories() {
    try {
      const snapshot = await db.collection('categories')
        .orderBy('order', 'asc')
        .get();
      
      const container = document.getElementById('adminCategoriesGrid');
      
      if (snapshot.empty) {
        container.innerHTML = `
          <div class="text-center text-muted" style="grid-column: 1/-1; padding: 40px;">
            <i class="fas fa-tags fa-3x mb-3"></i>
            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØµÙ†ÙŠÙØ§Øª</p>
          </div>
        `;
        return;
      }
      
      let categoriesHTML = '';
      
      snapshot.docs.forEach(doc => {
        const category = doc.data();
        
        categoriesHTML += `
          <div class="category-card">
            <div class="category-icon" style="color: ${category.color || '#6B5BFF'}">
              <i class="${category.icon || 'fas fa-tag'}"></i>
            </div>
            <div class="category-name">${category.name}</div>
            <div style="margin-top: 10px;">
              <button class="admin-btn admin-btn-sm admin-btn-danger" onclick="deleteAdminCategory('${doc.id}')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = categoriesHTML;
      
    } catch (error) {
      console.error('Error loading admin categories:', error);
    }
  }

  // ---------- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ----------
  document.getElementById('addProductForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    try {
      const productData = {
        name: document.getElementById('productName').value.trim(),
        price: parseFloat(document.getElementById('productPrice').value),
        discount: parseInt(document.getElementById('productDiscount').value) || 0,
        stock: parseInt(document.getElementById('productStock').value),
        category: document.getElementById('productCategory').value || 'Ø¹Ø§Ù…',
        imageUrl: document.getElementById('productImage').value.trim(),
        featured: false,
        active: true,
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        rating: 0,
        ratingCount: 0,
        sales: 0
      };
      
      if (!productData.name || productData.price <= 0 || productData.stock < 0) {
        showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
        return;
      }
      
      await db.collection('products').add(productData);
      
      showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      clearProductForm();
      loadAdminProducts();
      loadFeaturedProducts();
      
    } catch (error) {
      console.error('Error adding product:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬', 'error');
    }
  });

  async function editAdminProduct(productId) {
    try {
      const productDoc = await db.collection('products').doc(productId).get();
      
      if (!productDoc.exists) {
        showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
        return;
      }
      
      const product = productDoc.data();
      
      // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      document.getElementById('productName').value = product.name || '';
      document.getElementById('productPrice').value = product.price || 0;
      document.getElementById('productDiscount').value = product.discount || 0;
      document.getElementById('productStock').value = product.stock || 0;
      document.getElementById('productCategory').value = product.category || '';
      document.getElementById('productImage').value = product.imageUrl || '';
      
      // ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
      const form = document.getElementById('addProductForm');
      form.onsubmit = async (e) => {
        e.preventDefault();
        
        try {
          const updatedData = {
            name: document.getElementById('productName').value.trim(),
            price: parseFloat(document.getElementById('productPrice').value),
            discount: parseInt(document.getElementById('productDiscount').value) || 0,
            stock: parseInt(document.getElementById('productStock').value),
            category: document.getElementById('productCategory').value || 'Ø¹Ø§Ù…',
            imageUrl: document.getElementById('productImage').value.trim(),
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
          };
          
          await db.collection('products').doc(productId).update(updatedData);
          
          showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
          clearProductForm();
          loadAdminProducts();
          loadFeaturedProducts();
          
          // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ù„Ø¥Ø¶Ø§ÙØ©
          form.onsubmit = arguments.callee;
          
        } catch (error) {
          console.error('Error updating product:', error);
          showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬', 'error');
        }
      };
      
      showNotification('ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬', 'info');
      
    } catch (error) {
      console.error('Error loading product for edit:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬', 'error');
    }
  }

  async function deleteAdminProduct(productId) {
    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) return;
    
    try {
      await db.collection('products').doc(productId).delete();
      showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      loadAdminProducts();
      loadFeaturedProducts();
      
    } catch (error) {
      console.error('Error deleting product:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'error');
    }
  }

  function clearProductForm() {
    document.getElementById('addProductForm').reset();
    document.getElementById('addProductForm').onsubmit = arguments.callee;
  }

  // ---------- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ----------
  document.getElementById('addCategoryForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    try {
      const categoryData = {
        name: document.getElementById('categoryName').value.trim(),
        icon: document.getElementById('categoryIcon').value,
        color: document.getElementById('categoryColor').value,
        order: globalCategories.length + 1,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      };
      
      if (!categoryData.name) {
        showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ØªØµÙ†ÙŠÙ', 'warning');
        return;
      }
      
      await db.collection('categories').add(categoryData);
      
      showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      clearCategoryForm();
      loadCategories();
      loadAdminCategories();
      
    } catch (error) {
      console.error('Error adding category:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ', 'error');
    }
  });

  async function deleteAdminCategory(categoryId) {
    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙØŸ')) return;
    
    try {
      await db.collection('categories').doc(categoryId).delete();
      showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØµÙ†ÙŠÙ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      loadCategories();
      loadAdminCategories();
      
    } catch (error) {
      console.error('Error deleting category:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØµÙ†ÙŠÙ', 'error');
    }
  }

  function clearCategoryForm() {
    document.getElementById('addCategoryForm').reset();
  }

  // ---------- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ----------
  async function viewAdminOrder(orderId) {
    try {
      const orderDoc = await db.collection('orders').doc(orderId).get();
      
      if (!orderDoc.exists) {
        showNotification('Ø§Ù„Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
        return;
      }
      
      const order = orderDoc.data();
      let message = `ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ #${orderId.substring(0, 8)}\n\n`;
      message += `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${order.userName || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\n`;
      message += `Ø§Ù„Ù‡Ø§ØªÙ: ${order.userPhone || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\n`;
      message += `Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${order.userAddress || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\n`;
      message += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${order.total?.toFixed(2) || '0'} Ø¬.Ù…\n`;
      
      alert(message);
      
    } catch (error) {
      console.error('Error viewing order:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨', 'error');
    }
  }

  async function updateOrderStatus(orderId, status) {
    try {
      const statusUpdate = {
        [`status.${status}`]: true,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      };
      
      await db.collection('orders').doc(orderId).update(statusUpdate);
      
      showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­', 'success');
      loadAdminOrders();
      
    } catch (error) {
      console.error('Error updating order status:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨', 'error');
    }
  }

  // ---------- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± ----------
  document.getElementById('storeSettingsForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    try {
      const settings = {
        storeName: document.getElementById('storeName').value,
        storePhone: document.getElementById('storePhone').value,
        shippingPrice: parseFloat(document.getElementById('shippingPrice').value) || 20,
        freeShippingMin: parseFloat(document.getElementById('freeShippingMin').value) || 300,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      };
      
      await db.collection('settings').doc('store').set(settings, { merge: true });
      
      showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
      
    } catch (error) {
      console.error('Error saving settings:', error);
      showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'error');
    }
  });

  // ---------- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ----------
  function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.cssText = `
      position: fixed;
      top: 80px;
      right: 20px;
      background: ${type === 'success' ? '#25D366' : type === 'error' ? '#FF2D55' : '#6B5BFF'};
      color: white;
      padding: 15px 25px;
      border-radius: var(--border-radius-md);
      z-index: 9999;
      box-shadow: var(--shadow-lg);
      animation: slideInDown 0.3s ease;
      max-width: 300px;
    `;
    
    notification.innerHTML = `
      <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
      ${message}
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideInUp 0.3s ease forwards';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }

  function openLoginModal() {
    const email = prompt('Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:');
    if (!email) return;
    
    const password = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:');
    if (!password) return;
    
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¨Ø³ÙŠØ· (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø§Ø³ØªØ®Ø¯Ù… Firebase Authentication)
    if (email === 'admin@example.com' && password === 'admin123') {
      const user = {
        uid: 'admin123',
        email: 'admin@example.com',
        displayName: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…'
      };
      
      auth.onAuthStateChanged = (callback) => {
        callback(user);
        return () => {};
      };
      
      setupAuth();
      showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
    } else {
      showNotification('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
    }
  }

  function openWhatsapp() {
    window.open(`https://wa.me/${APP_CONFIG.whatsapp}`, '_blank');
  }

  function openPhone() {
    window.open(`tel:${APP_CONFIG.phone}`, '_self');
  }

  function goHome() {
    window.location.reload();
  }

  function setActiveNav(item) {
    document.querySelectorAll('.nav-item').forEach(nav => {
      nav.classList.remove('active');
    });
    item.classList.add('active');
  }

  function openCart() {
    if (!currentUser) {
      showNotification('Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±Ø¨Ø©', 'warning');
      openLoginModal();
      return;
    }
    
    if (cart.length === 0) {
      showNotification('Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©', 'info');
      return;
    }
    
    let message = 'ğŸ›’ Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚:\n\n';
    let total = 0;
    
    cart.forEach(item => {
      const itemTotal = item.price * (1 - item.discount / 100) * item.quantity;
      total += itemTotal;
      message += `${item.name} Ã— ${item.quantity} = ${itemTotal.toFixed(2)} Ø¬.Ù…\n`;
    });
    
    message += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toFixed(2)} Ø¬.Ù…`;
    
    alert(message);
  }

  function openWishlist() {
    showNotification('Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹', 'info');
  }

  function showOffersPage() {
    showNotification('ØµÙØ­Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±', 'info');
  }

  function showCategoriesPage() {
    showNotification('Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±', 'info');
  }

  function showAllProductsPage() {
    showNotification('Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±', 'info');
  }

  function filterByCategory(categoryName) {
    showNotification(`ØªØµÙÙŠØ© Ø­Ø³Ø¨: ${categoryName}`, 'info');
  }

  // ---------- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ----------
  function setupEventListeners() {
    // Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    document.getElementById('adminOverlay').addEventListener('click', closeAdminPanel);
    
    // Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù‡Ø±ÙˆØ¨
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeAdminPanel();
      }
    });
    
    // ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ
    document.addEventListener('touchstart', function(e) {
      if (e.touches.length > 1) {
        e.preventDefault();
      }
    }, { passive: false });
  }

  console.log('ğŸ‰ ØªØ·Ø¨ÙŠÙ‚ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¬Ø§Ù‡Ø²!');
  </script>
</body>
</html>